var saladbar=function(){"use strict";function t(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function n(n){return function e(r){return 0===arguments.length||t(r)?e:n.apply(this,arguments)}}function e(e){return function r(i,u){switch(arguments.length){case 0:return r;case 1:return t(i)?r:n(function(t){return e(i,t)});default:return t(i)&&t(u)?r:t(i)?n(function(t){return e(t,u)}):t(u)?n(function(t){return e(i,t)}):e(i,u)}}}function r(t,n){var e;t=t||[],n=n||[];var r=t.length,i=n.length,u=[];for(e=0;e<r;)u[u.length]=t[e],e+=1;for(e=0;e<i;)u[u.length]=n[e],e+=1;return u}function i(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,i){return n.apply(this,arguments)};case 5:return function(t,e,r,i,u){return n.apply(this,arguments)};case 6:return function(t,e,r,i,u,o){return n.apply(this,arguments)};case 7:return function(t,e,r,i,u,o,a){return n.apply(this,arguments)};case 8:return function(t,e,r,i,u,o,a,c){return n.apply(this,arguments)};case 9:return function(t,e,r,i,u,o,a,c,s){return n.apply(this,arguments)};case 10:return function(t,e,r,i,u,o,a,c,s,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function u(n,e,r){return function(){for(var o=[],a=0,c=n,s=0;s<e.length||a<arguments.length;){var f;s<e.length&&(!t(e[s])||a>=arguments.length)?f=e[s]:(f=arguments[a],a+=1),o[s]=f,t(f)||(c-=1),s+=1}return c<=0?r.apply(this,o):i(c,u(n,o,r))}}var o=e(function(t,e){return 1===t?n(e):i(t,u(t,[],e))});function a(r){return function i(u,o,a){switch(arguments.length){case 0:return i;case 1:return t(u)?i:e(function(t,n){return r(u,t,n)});case 2:return t(u)&&t(o)?i:t(u)?e(function(t,n){return r(t,o,n)}):t(o)?e(function(t,n){return r(u,t,n)}):n(function(t){return r(u,o,t)});default:return t(u)&&t(o)&&t(a)?i:t(u)&&t(o)?e(function(t,n){return r(t,n,a)}):t(u)&&t(a)?e(function(t,n){return r(t,o,n)}):t(o)&&t(a)?e(function(t,n){return r(u,t,n)}):t(u)?n(function(t){return r(t,o,a)}):t(o)?n(function(t){return r(u,t,a)}):t(a)?n(function(t){return r(u,o,t)}):r(u,o,a)}}}var c=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function s(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!c(i)){for(var u=0;u<t.length;){if("function"==typeof i[t[u]])return i[t[u]].apply(i,r);u+=1}if(function(t){return"function"==typeof t["@@transducer/step"]}(i))return n.apply(null,r)(i)}return e.apply(this,arguments)}}var f={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function h(t,n){for(var e=0,r=n.length,i=Array(r);e<r;)i[e]=t(n[e]),e+=1;return i}function p(t){return"[object String]"===Object.prototype.toString.call(t)}var l=n(function(t){return!!c(t)||!!t&&("object"==typeof t&&(!p(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),y=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function _(t){return new y(t)}var d=e(function(t,n){return i(t.length,function(){return t.apply(n,arguments)})});function v(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function g(t,n,e,r){return t["@@transducer/result"](e[r](d(t["@@transducer/step"],t),n))}var m="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function b(t,n,e){if("function"==typeof t&&(t=_(t)),l(e))return function(t,n,e){for(var r=0,i=e.length;r<i;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return g(t,n,e,"fantasy-land/reduce");if(null!=e[m])return v(t,n,e[m]());if("function"==typeof e.next)return v(t,n,e);if("function"==typeof e.reduce)return g(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var F=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=f.init,t.prototype["@@transducer/result"]=f.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),w=e(function(t,n){return new F(t,n)});function j(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var k=Object.prototype.toString,S=!{toString:null}.propertyIsEnumerable("toString"),O=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=function(){return arguments.propertyIsEnumerable("length")}(),x=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},R=n("function"!=typeof Object.keys||A?function(t){if(Object(t)!==t)return[];var n,e,r=[],i=A&&function(){return"[object Arguments]"===k.call(arguments)?function(t){return"[object Arguments]"===k.call(t)}:function(t){return j("callee",t)}}(t);for(n in t)!j(n,t)||i&&"length"===n||(r[r.length]=n);if(S)for(e=O.length-1;e>=0;)j(n=O[e],t)&&!x(r,n)&&(r[r.length]=n),e-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),P=e(s(["fantasy-land/map","map"],w,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return o(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return b(function(e,r){return e[r]=t(n[r]),e},{},R(n));default:return h(t,n)}})),q=a(b),M=e(function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(e){return t(e)(n(e))}:b(function(t,e){return r(t,P(e,n))},[],t)});var N=n(function(t){return o(t.length,t)});var E=function(t){var n=function(t){return{"@@transducer/init":f.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,e){var r=t["@@transducer/step"](n,e);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":f.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return l(e)?b(n,t,e):b(n,t,[e])}}},T=e(s(["fantasy-land/chain","chain"],e(function(t,n){return P(t,E(n))}),function(t,n){return"function"==typeof n?function(e){return t(n(e))(e)}:(e=!1,function t(n){for(var r,i,u,o=[],a=0,c=n.length;a<c;){if(l(n[a]))for(u=0,i=(r=e?t(n[a]):n[a]).length;u<i;)o[o.length]=r[u],u+=1;else o[o.length]=n[a];a+=1}return o})(P(t,n));var e}));function z(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function C(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return c(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var W=a(C("slice",function(t,n,e){return Array.prototype.slice.call(e,t,n)})),L=n(C("tail",W(1,1/0)));var B=n(function(t){return p(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});function I(){if(0===arguments.length)throw new Error("compose requires at least one argument");return function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return i(arguments[0].length,q(z,arguments[0],L(arguments)))}.apply(this,B(arguments))}var D=function(t){return(t<10?"0":"")+t};Date.prototype.toISOString;var Q=a(function(t,n,e){return o(Math.max(t.length,n.length,e.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):e.apply(this,arguments)})});var G=e(function(t,n){return r([t],n)}),Z=a(function(t,n,e){for(var r=e.length-1;r>=0;)n=t(e[r],n),r-=1;return n}),$=e(function(t,n){return"function"==typeof n.sequence?n.sequence(t):Z(function(t,n){return M(P(G,t),n)},t([]),n)}),U=a(function(t,n,e){return"function"==typeof e["fantasy-land/traverse"]?e["fantasy-land/traverse"](n,t):$(t,P(n,e))}),J="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",V=(String.prototype.trim,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});function X(t,n){return t(n={exports:{}},n.exports),n.exports}var Y=X(function(t){var n;t.exports=(n="@@type",function(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t.constructor[n]?t.constructor[n]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)})}),H=X(function(t){t.exports=function(t){function n(t){return function(n){return t.concat(n)}}function e(t){return function(n){return t}}function r(t,n){Object.keys(t).forEach(n,t)}function i(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function u(t){return t}function o(t){return function(n){return[t,n]}}function a(n,e){return typeof n==typeof e&&t(n)===t(e)}function c(t){return{value:t,done:!1}}function s(t){return{value:t,done:!0}}function f(t,n,e,r){if(!(this instanceof f))return new f(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}f["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",p="Value";function l(t,n,e){for(var r=e,u=0;u<n.length;u+=1){var o=n[u];if(null==r||!t&&!i(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function y(t,n){return l(!0,t,n)}function _(t){return l(!1,t,J)}var d=i("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=y([e],t);return null==n&&"function"==typeof t?_([d(t),e]):n}:function(n){var r=null!=n&&null!=n.constructor&&n.constructor.prototype===n,i=null;return r||(i=y([e],n)),null==i&&(i=_([t(n),"prototype",e])),i&&i.bind(n)}}var u=Object.keys(r),o=f("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v8.0.0#"+n,e,function(t){return u.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return o.methods=u.reduce(function(t,n){return t[n]=i(n),t},{}),o}var g=v("Setoid",[],{equals:p}),m=v("Ord",[g],{lte:p}),b=v("Semigroupoid",[],{compose:p}),F=v("Category",[b],{id:h}),w=v("Semigroup",[],{concat:p}),j=v("Monoid",[w],{empty:h}),k=v("Group",[j],{invert:p}),S=v("Filterable",[],{filter:p}),O=v("Functor",[],{map:p}),A=v("Bifunctor",[O],{bimap:p}),x=v("Profunctor",[O],{promap:p}),R=v("Apply",[O],{ap:p}),P=v("Applicative",[R],{of:h}),q=v("Chain",[R],{chain:p}),M=v("ChainRec",[q],{chainRec:h}),N=v("Monad",[P,q],{}),E=v("Alt",[O],{alt:p}),T=v("Plus",[E],{zero:h}),z=v("Alternative",[P,T],{}),C=v("Foldable",[],{reduce:p}),W=v("Traversable",[O,C],{traverse:p}),L=v("Extend",[O],{extend:p}),B=v("Comonad",[L],{extract:p}),I=v("Contravariant",[],{contramap:p});function D(t){return[t]}function Q(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!X(this[n],t[n]))return!1;return!0}function G(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!X(this[n],t[n]))return H(this[n],t[n])}}function Z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return r(this,e),r(t,e),n}var U,J={Null:{prototype:{toString:function(){return"null"},"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{toString:function(){return"undefined"},"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{toString:function(){return"object"==typeof this?"new Boolean("+V(this.valueOf())+")":this.toString()},"fantasy-land/equals":function(t){return"object"==typeof this?X(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?H(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{toString:function(){return"object"==typeof this?"new Number("+V(this.valueOf())+")":1/this==-1/0?"-0":this.toString(10)},"fantasy-land/equals":function(t){return"object"==typeof this?X(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?H(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this<=t}}},Date:{prototype:{toString:function(){var t=isNaN(this.valueOf())?NaN:this.toISOString();return"new Date("+V(t)+")"},"fantasy-land/equals":function(t){return X(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return H(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{toString:function(){return"object"==typeof this?"new String("+V(this.valueOf())+")":JSON.stringify(this)},"fantasy-land/equals":function(t){return"object"==typeof this?X(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?H(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":D,"fantasy-land/chainRec":function(t,n){for(var e=[n],r=[];e.length>0;){for(var i=t(c,s,e.shift()),u=[],o=0;o<i.length;o+=1)(i[o].done?r:u).push(i[o].value);Array.prototype.unshift.apply(e,u)}return r},"fantasy-land/zero":function(){return[]},prototype:{toString:function(){for(var t=this.map(V),n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];/^\d+$/.test(r)||t.push(V(r)+": "+V(this[r]))}return"["+t.join(", ")+"]"},"fantasy-land/equals":Q,"fantasy-land/lte":G,"fantasy-land/concat":Z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){var n=[];return this.forEach(function(e){Array.prototype.push.apply(n,t(e))}),n},"fantasy-land/alt":Z,"fantasy-land/reduce":function(t,n){return this.reduce(function(n,e){return t(n,e)},n)},"fantasy-land/traverse":function(t,e){var r=this;function i(u,a){switch(a){case 0:return ut(t,[]);case 2:return it(o,e(r[u]),e(r[u+1]));default:var c=2*Math.floor(a/4);return it(n,i(u,c),i(u+c,a-c))}}return this.length%2==1?it(n,et(D,e(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{toString:function(){return"(function () { return arguments; }("+Array.prototype.map.call(this,V).join(", ")+"))"},"fantasy-land/equals":function(t){return Q.call(this,t)},"fantasy-land/lte":function(t){return G.call(this,t)}}},Error:{prototype:{toString:function(){return"new "+this.name+"("+V(this.message)+")"},"fantasy-land/equals":function(t){return X(this.name,t.name)&&X(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{toString:function(){for(var t=[],n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];t.push(V(r)+": "+V(this[r]))}return"{"+t.join(", ")+"}"},"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return X(e,Object.keys(t).sort())&&e.every(function(e){return X(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!X(this[r],t[r]))return H(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return r(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return r(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return r(this,function(e){i(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return u},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=c(n);!r.done;)r=t(c,s,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(K(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},V=function(){var n=[];function e(t,e){n.push(e);try{return t.call(e)}finally{n.pop()}}return function(r){if(n.indexOf(r)>=0)return"<Circular>";var i=t(r);if("Object"===i){var u;try{u=e(r.toString,r)}catch(t){}if(null!=u&&"[object Object]"!==u)return u}return e(_([i,"prototype","toString"])||r.toString,r)}}(),X=(U=[],function(t,n){if(!a(t,n))return!1;if(U.some(function(e){return e[0]===t&&e[1]===n}))return!0;U.push([t,n]);try{return g.test(t)&&g.test(n)&&g.methods.equals(t)(n)}finally{U.pop()}});function Y(t,n){return a(t,n)&&!H(n,t)}var H=function(){var t=[];return function(n,e){if(!a(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return X(n,e);t.push([n,e]);try{return m.test(n)&&m.test(e)&&m.methods.lte(n)(e)}finally{t.pop()}}}();function K(t,n){return w.methods.concat(t)(n)}function tt(t){return j.methods.empty(t)()}function nt(t,n){return S.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n){return R.methods.ap(n)(t)}function it(t,n,e){return rt(et(t,n),e)}function ut(t,n){return P.methods.of(t)(n)}function ot(t,n){return q.methods.chain(n)(t)}function at(t,n,e){return C.methods.reduce(e)(t,n)}function ct(t,n){for(var e=at(function(n,e){for(var r=t(e),i=0,u=n.length;i<u;){var o=Math.floor((i+u)/2);H(n[o].fx,r)?i=o+1:u=o}return n.splice(i,0,{x:e,fx:r}),n},[],n),r=n.constructor,i=tt(r),u=0;u<e.length;u+=1)i=K(i,ut(r,e[u].x));return i}function st(t,n,e){return W.methods.traverse(e)(t,n)}function ft(t,n){return L.methods.extend(n)(t)}return{TypeClass:f,Setoid:g,Ord:m,Semigroupoid:b,Category:F,Semigroup:w,Monoid:j,Group:k,Filterable:S,Functor:O,Bifunctor:A,Profunctor:x,Apply:R,Applicative:P,Chain:q,ChainRec:M,Monad:N,Alt:E,Plus:T,Alternative:z,Foldable:C,Traversable:W,Extend:L,Comonad:B,Contravariant:I,toString:V,equals:X,lt:Y,lte:H,gt:function(t,n){return Y(n,t)},gte:function(t,n){return H(n,t)},min:function(t,n){return H(t,n)?t:n},max:function(t,n){return H(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return F.methods.id(t)()},concat:K,empty:tt,invert:function(t){return k.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,bimap:function(t,n,e){return A.methods.bimap(e)(t,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:rt,lift2:it,lift3:function(t,n,e,r){return rt(rt(et(t,n),e),r)},apFirst:function(t,n){return it(e,t,n)},apSecond:function(t,n){return it(e(u),t,n)},of:ut,append:function(t,n){return K(n,ut(n.constructor,t))},prepend:function(t,n){return K(ut(n.constructor,t),n)},chain:ot,join:function(t){return ot(u,t)},chainRec:function(t,n,e){return M.methods.chainRec(t)(n,e)},alt:function(t,n){return E.methods.alt(t)(n)},zero:function(t){return T.methods.zero(t)()},reduce:at,size:function(t){return Array.isArray(t)?t.length:at(function(t,n){return t+1},0,t)},elem:function(t,n){return at(function(n,e){return n||X(t,e)},!1,n)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return at(function(t,e){return K(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(u,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:st,sequence:function(t,n){return st(t,u,n)},extend:ft,duplicate:function(t){return ft(u,t)},extract:function(t){return B.methods.extract(t)()},contramap:function(t,n){return I.methods.contramap(n)(t)}}}(Y)}),K=X(function(t){t.exports=function(){var t=/^ */,n=/\s*[^\s]/,e=/\t/g,r=/\n\r?/;function i(t){return n.test(t)}function u(n){return n.match(t)[0].length}function o(t){return new Array(t+1).join(" ")}function a(t,n){var r=function(t){var n=t.filter(i).map(u),e=n.reduce(Math.min,1/0),r=n.map(function(t){return t-e}).find(function(t){return t>1})||2;return{depth:e,tabsize:r}}(t.slice(1)),a=new RegExp(o(r.tabsize),"g");return t.map(function(t){return t.slice(Math.min(r.depth,u(t))).replace(a,"\t").replace(e,n)}).join("\n")}return function t(n,i){if(function(t){if("number"!=typeof t)throw new TypeError("inspectf expects its first argument to be a number")}(n),arguments.length<2)return function(e){return t(n,e)};if(function(t){if("function"!=typeof t)throw new TypeError("inspectf expects its second argument to be a function")}(i),i.toString!==Function.prototype.toString)return i.toString();var u=o(n),c=function(t,n){return t.toString().replace(e,n)}(i,u),s=c.split(r);return s.length<2?c:a(s,u)}}()}),tt=X(function(t){t.exports=function(){var t="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");function e(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}return e.parse=function(t){var e=n.exec(t);return{namespace:null==e||null==e[1]?null:e[1],name:null==e?t:e[2],version:null==e||null==e[3]?0:Number(e[3])}},e}()}),nt=X(function(t){t.exports=function(t,n){var e="@@type",r=["first","second","third","fourth","fifth"];function i(t){return"function"==typeof t}function u(t){return t.length>=2}function o(n,e,i,u){throw new TypeError(n+" expects its "+r[e]+" argument to "+i+"\n  Actual: "+t.toString(u))}function a(n,e,r){throw new TypeError(n+" was invoked outside the context of a "+r+". \n  Called on: "+t.toString(e))}return function(r,c,s,f){var h,p,l=function(t){return t[e]||t.name||"Anonymous"}(r),y=(h=l,((p=n.parse(h)).namespace||"concurrify")+"/Concurrent"+p.name+"@"+p.version),_=n.parse(l).name,d=n.parse(y).name;function v(t){this.sequential=t}function g(t){return t instanceof r||Boolean(t)&&t.constructor===r||n(t)===r[e]}function m(t){return t instanceof v||Boolean(t)&&t.constructor===v||n(t)===y}function b(t){return g(t)||o(d,0,'be of type "'+_+'"',t),new v(t)}(function(n){try{return t.Applicative.test(t.of(n))}catch(t){return!1}})(r)||o("concurrify",0,"represent an Applicative",r),g(c)||o("concurrify",1,'be of type "'+_+'"',c),i(s)||o("concurrify",2,"be a function",s),u(s)||o("concurrify",2,"be binary",s),i(f)||o("concurrify",3,"be a function",f),u(f)||o("concurrify",3,"be binary",f);var F=v.prototype=b.prototype={constructor:b};b[e]=y;var w=new v(c);return b["fantasy-land/zero"]=function(){return w},b["fantasy-land/of"]=function(n){return new v(t.of(r,n))},F["fantasy-land/map"]=function(n){return m(this)||a(d+"#map",this,d),i(n)||o(d+"#map",0,"be a function",n),new v(t.map(n,this.sequential))},F["fantasy-land/ap"]=function(t){return m(this)||a(d+"#ap",this,d),m(t)||o(d+"#ap",0,"be a "+d,t),new v(f(this.sequential,t.sequential))},F["fantasy-land/alt"]=function(t){return m(this)||a(d+"#alt",this,d),m(t)||o(d+"#alt",0,"be a "+d,t),new v(s(this.sequential,t.sequential))},F.toString=function(){return m(this)||a(d+"#toString",this,d),d+"("+t.toString(this.sequential)+")"},b}}(H,tt)});function et(t){this._list=new Array(4),this._capacityMask=3,this._head=0,this._tail=0,Array.isArray(t)&&this._fromArray(t)}et.prototype.peekAt=function(t){var n=t;if(n===(0|n)){var e=this.size();if(!(n>=e||n<-e))return n<0&&(n+=e),n=this._head+n&this._capacityMask,this._list[n]}},et.prototype.get=function(t){return this.peekAt(t)},et.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},et.prototype.peekFront=function(){return this.peek()},et.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(et.prototype,"length",{get:function(){return this.size()}}),et.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},et.prototype.unshift=function(t){if(void 0===t)return this.length;var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},et.prototype.shift=function(){var t=this._head;if(t!==this._tail){var n=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}},et.prototype.push=function(t){if(void 0===t)return this.length;var n=this._tail;return this._list[n]=t,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},et.prototype.pop=function(){var t=this._tail;if(t!==this._head){var n=this._list.length;this._tail=t-1+n&this._capacityMask;var e=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=n>>>2&&this._shrinkArray(),e}},et.prototype.removeOne=function(t){var n=t;if(n===(0|n)&&this._head!==this._tail){var e=this.size(),r=this._list.length;if(!(n>=e||n<-e)){n<0&&(n+=e),n=this._head+n&this._capacityMask;var i,u=this._list[n];if(t<e/2){for(i=t;i>0;i--)this._list[n]=this._list[n=n-1+r&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(i=e-1-t;i>0;i--)this._list[n]=this._list[n=n+1+r&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+r&this._capacityMask}return u}}},et.prototype.remove=function(t,n){var e,r=t,i=n;if(r===(0|r)&&this._head!==this._tail){var u=this.size(),o=this._list.length;if(!(r>=u||r<-u||n<1)){if(r<0&&(r+=u),1===n||!n)return(e=new Array(1))[0]=this.removeOne(r),e;if(0===r&&r+n>=u)return e=this.toArray(),this.clear(),e;var a;for(r+n>u&&(n=u-r),e=new Array(n),a=0;a<n;a++)e[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,t+n===u){for(this._tail=this._tail-n+o&this._capacityMask,a=n;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return e}if(0===t){for(this._head=this._head+n+o&this._capacityMask,a=n-1;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return e}if(t<u/2){for(this._head=this._head+t+n+o&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[r=r-1+o&this._capacityMask]);for(r=this._head-1+o&this._capacityMask;i>0;)this._list[r=r-1+o&this._capacityMask]=void 0,i--}else{for(this._tail=r,r=r+n+o&this._capacityMask,a=u-(n+t);a>0;a--)this.push(this._list[r++]);for(r=this._tail;i>0;)this._list[r=r+1+o&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),e}}},et.prototype.splice=function(t,n){var e=t,r=this.size();if(e===(0|e)&&this._head!==this._tail&&!(e>r||e<-r||e===r&&0!=n)){if(e<0&&(e+=r),arguments.length>2){var i,u,o,a=arguments.length,c=this._list.length,s=2;if(e<r/2){for(u=new Array(e),i=0;i<e;i++)u[i]=this._list[this._head+i&this._capacityMask];for(0===n?(o=[],e>0&&(this._head=this._head+e+c&this._capacityMask)):(o=this.remove(e,n),this._head=this._head+e+c&this._capacityMask);a>s;)this.unshift(arguments[--a]);for(i=e;i>0;i--)this.unshift(u[i-1])}else{var f=(u=new Array(r-(e+n))).length;for(i=0;i<f;i++)u[i]=this._list[this._head+e+n+i&this._capacityMask];for(0===n?(o=[],e!=r&&(this._tail=this._head+e+c&this._capacityMask)):(o=this.remove(e,n),this._tail=this._tail-f+c&this._capacityMask);s<a;)this.push(arguments[s++]);for(i=0;i<f;i++)this.push(u[i])}return o}return this.remove(e,n)}},et.prototype.clear=function(){this._head=0,this._tail=0},et.prototype.isEmpty=function(){return this._head===this._tail},et.prototype.toArray=function(){return this._copyArray(!1)},et.prototype._fromArray=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},et.prototype._copyArray=function(t){var n,e=[],r=this._list,i=r.length;if(t||this._head>this._tail){for(n=this._head;n<i;n++)e.push(r[n]);for(n=0;n<this._tail;n++)e.push(r[n])}else for(n=this._head;n<this._tail;n++)e.push(r[n]);return e},et.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},et.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};var rt=et,it=X(function(t,n){t.exports=function(t,n,e,r,i){t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i;const u="object"==typeof self?self:"object"==typeof V?V:"object"==typeof window?window:{},o="function"==typeof u.setImmediate?u.setImmediate:function(t,n){return setTimeout(t,0,n)};function a(){}function c(){return this}var s=t.toString;function f(t){return e="  ",n(2,t).replace(/^/gm,e).replace(e,"");var e}function h(t,n){return function(e,r,i){switch(arguments.length){case 1:return t(n,e);case 2:return t(n,e,r);default:return t(n,e,r,i)}}}function p(t,n,e){return function(r,i){return 1===arguments.length?t(n,e,r):t(n,e,r,i)}}function l(t,n,e,r){return function(i){return t(n,e,r,i)}}function y(t){return function(n){return o(t,n)}}var _={map:"fantasy-land/map",bimap:"fantasy-land/bimap",chain:"fantasy-land/chain",chainRec:"fantasy-land/chainRec",ap:"fantasy-land/ap",of:"fantasy-land/of",zero:"fantasy-land/zero"},d=["first","second","third","fourth","fifth"],v="fluture",g="Future",m=3,b=v+"/"+g+"@"+m;function F(t){throw new Error(t)}function w(t){throw new TypeError(t)}function j(t,n,e,r){w(t+" expects its "+d[n]+" argument to "+e+"\n  Actual: "+s(r))}function k(t,n){w(t+" was invoked outside the context of a Future. You might want to use a dispatcher instead\n  Called on: "+s(n))}function S(t,n,r,i){var u,o=e.parse(e(r)),a=o.name===g?"\n"+(o.namespace!==v?(u=o.namespace,"The Future was not created by "+v+". Make sure you transform other Futures to "+v+" Futures. Got "+(u?"a Future from "+u:"an unscoped Future")+".\n  See: https://github.com/fluture-js/Fluture#casting-futures"):o.version!==m?function(t,n){return"The Future was created by "+(n<m?"an older":"a newer")+" version of "+v+". This means that one of the sources which creates Futures is outdated. Update this source, or transform its created Futures to be compatible.\n  See: https://github.com/fluture-js/Fluture#casting-futures"}(0,o.version):"Nothing seems wrong. Contact the Fluture maintainers."):"";w(t+" expects "+(d[n]?"its "+d[n]+" argument to be a valid Future":n)+"."+a+"\n  Actual: "+s(r)+" :: "+o.name+(i||""))}function O(t){return"function"==typeof t}function A(t){return t instanceof Promise||Boolean(t)&&O(t.then)}function x(t){return t===1/0||"number"==typeof t&&t>0&&t%1==0}function R(t){return null!==t&&"object"==typeof t}var P={isEmpty:!0,size:0,head:null,tail:null};function q(t){F("Future#value was called on a rejected Future\n  Actual: Future.reject("+s(t)+")")}function M(t){return O(t)||j("Future",0,"be a Function",t),new T(t)}function N(t){return t instanceof M||e(t)===b}M["@@type"]=b,M.prototype[_.ap]=function(t){return t._ap(this)},M.prototype[_.map]=function(t){return this._map(t)},M.prototype[_.bimap]=function(t,n){return this._bimap(t,n)},M.prototype[_.chain]=function(t){return this._chain(t)},M.prototype.ap=function(t){return N(this)||k("Future#ap",this),N(t)||S("Future#ap",0,t),this._ap(t)},M.prototype.map=function(t){return N(this)||k("Future#map",this),O(t)||j("Future#map",0,"to be a Function",t),this._map(t)},M.prototype.bimap=function(t,n){return N(this)||k("Future#bimap",this),O(t)||j("Future#bimap",0,"to be a Function",t),O(n)||j("Future#bimap",1,"to be a Function",n),this._bimap(t,n)},M.prototype.chain=function(t){return N(this)||k("Future#chain",this),O(t)||j("Future#chain",0,"to be a Function",t),this._chain(t)},M.prototype.mapRej=function(t){return N(this)||k("Future#mapRej",this),O(t)||j("Future#mapRej",0,"to be a Function",t),this._mapRej(t)},M.prototype.chainRej=function(t){return N(this)||k("Future#chainRej",this),O(t)||j("Future#chainRej",0,"to be a Function",t),this._chainRej(t)},M.prototype.race=function(t){return N(this)||k("Future#race",this),N(t)||S("Future#race",0,t),this._race(t)},M.prototype.both=function(t){return N(this)||k("Future#both",this),N(t)||S("Future#both",0,t),this._both(t)},M.prototype.and=function(t){return N(this)||k("Future#and",this),N(t)||S("Future#and",0,t),this._and(t)},M.prototype.or=function(t){return N(this)||k("Future#or",this),N(t)||S("Future#or",0,t),this._or(t)},M.prototype.swap=function(){return N(this)||k("Future#ap",this),this._swap()},M.prototype.fold=function(t,n){return N(this)||k("Future#ap",this),O(t)||j("Future#fold",0,"to be a Function",t),O(n)||j("Future#fold",1,"to be a Function",n),this._fold(t,n)},M.prototype.finally=function(t){return N(this)||k("Future#finally",this),N(t)||S("Future#finally",0,t),this._finally(t)},M.prototype.lastly=function(t){return N(this)||k("Future#lastly",this),N(t)||S("Future#lastly",0,t),this._finally(t)},M.prototype.fork=function(t,n){return N(this)||k("Future#fork",this),O(t)||j("Future#fork",0,"to be a Function",t),O(n)||j("Future#fork",0,"to be a Function",n),this._fork(t,n)},M.prototype.value=function(t){return N(this)||k("Future#value",this),O(t)||j("Future#value",0,"to be a Function",t),this._fork(q,t)},M.prototype.done=function(t){return N(this)||k("Future#done",this),O(t)||j("Future#done",0,"to be a Function",t),this._fork(function(n){t(n)},function(n){t(null,n)})},M.prototype.promise=function(){var t=this;return new Promise(function(n,e){t._fork(e,n)})},M.prototype.isRejected=function(){return!1},M.prototype.isResolved=function(){return!1},M.prototype.isSettled=function(){return this.isRejected()||this.isResolved()},M.prototype.extractLeft=function(){return[]},M.prototype.extractRight=function(){return[]};var E=Object.create(M.prototype);function T(t){this._computation=t}function z(t){this._value=t}function C(t){return new z(t)}function W(t){this._value=t}function L(t){return new W(t)}function B(){this._isNever=!0}E._ap=function(t){return new at(this)._ap(t)},E._map=function(t){return new at(this)._map(t)},E._bimap=function(t,n){return new at(this)._bimap(t,n)},E._chain=function(t){return new at(this)._chain(t)},E._mapRej=function(t){return new at(this)._mapRej(t)},E._chainRej=function(t){return new at(this)._chainRej(t)},E._race=function(t){return new at(this)._race(t)},E._both=function(t){return new at(this)._both(t)},E._and=function(t){return new at(this)._and(t)},E._or=function(t){return new at(this)._or(t)},E._swap=function(){return new at(this)._swap()},E._fold=function(t,n){return new at(this)._fold(t,n)},E._finally=function(t){return new at(this)._finally(t)},T.prototype=Object.create(E),T.prototype._fork=function(t,n){var e=!0,r=this._computation(function(n){e&&(e=!1,t(n))},function(t){e&&(e=!1,n(t))});return function(t,n){void 0===t||O(t)&&0===t.length||w("Future expected its computation to return a nullary function or void\n  Actual: "+s(t)+"\n  From calling: "+f(n))}(r,this._computation),function(){e&&r&&r(),e=!1}},T.prototype.toString=function(){return"Future("+f(this._computation)+")"},z.prototype=Object.create(E),z.prototype._ap=c,z.prototype._map=c,z.prototype._chain=c,z.prototype._race=c,z.prototype._both=c,z.prototype._and=c,z.prototype._or=function(t){return t},z.prototype._finally=function(t){return t._and(this)},z.prototype._swap=function(){return new W(this._value)},z.prototype._fork=function(t){return t(this._value),a},z.prototype.isRejected=function(){return!0},z.prototype.extractLeft=function(){return[this._value]},z.prototype.toString=function(){return"Future.reject("+s(this._value)+")"},W.prototype=Object.create(E),W.prototype._race=c,W.prototype._mapRej=c,W.prototype._or=c,W.prototype._and=function(t){return t},W.prototype._both=function(t){var n=this._value;return t._map(function(t){return[n,t]})},W.prototype._swap=function(){return new z(this._value)},W.prototype._finally=function(t){var n=this._value;return t._map(function(){return n})},W.prototype._fork=function(t,n){return n(this._value),a},W.prototype.isResolved=function(){return!0},W.prototype.extractRight=function(){return[this._value]},W.prototype.toString=function(){return"Future.of("+s(this._value)+")"},B.prototype=Object.create(M.prototype),B.prototype._ap=c,B.prototype._map=c,B.prototype._bimap=c,B.prototype._chain=c,B.prototype._mapRej=c,B.prototype._chainRej=c,B.prototype._both=c,B.prototype._or=c,B.prototype._swap=c,B.prototype._fold=c,B.prototype._finally=c,B.prototype._race=function(t){return t},B.prototype._fork=function(){return a},B.prototype.toString=function(){return"Future.never"};var I=new B;function D(t){return N(t)&&!0===t._isNever}function Q(t){var n=this;n.rej=a,n.res=a,n.rejected=!1,n.resolved=!1,n.value=null,n.cancel=t._fork(function(t){n.value=t,n.rejected=!0,n.cancel=a,n.rej(t)},function(t){n.value=t,n.resolved=!0,n.cancel=a,n.res(t)})}Q.prototype=Object.create(E),Q.prototype._fork=function(t,n){return this.rejected?t(this.value):this.resolved?n(this.value):(this.rej=t,this.res=n),this.cancel};var G={rejected:function(t){return this.cancel(),new z(t)},resolved:function(t){return this.cancel(),new W(t)},run:function(){return this},cancel:function(){}};function Z(t){this.other=t}function $(t){this.mapper=t}function U(t,n){this.lmapper=t,this.rmapper=n}function J(t){this.mapper=t}function X(t){this.mapper=t}function Y(t){this.mapper=t}function H(){}function K(t,n){this.lmapper=t,this.rmapper=n}function tt(t){this.other=t}function nt(t){this.other=t}function et(t){this.other=t}function rt(t){this.other=t}function it(t){this.other=t}function ut(t,n){var e=this;e.other=n,e.cancel=n._fork(function(n){t(new z(n),e)},function(n){t(new W(n),e)})}function ot(t,n){var e=this;e.other=n,e.cancel=n._fork(function(n){t(new z(n),e)},a)}function at(t,n){this._spawn=t,this._actions=n||P}function ct(t){return{done:!1,value:t}}function st(t){return{done:!0,value:t}}Z.prototype=Object.create(G),Z.prototype.resolved=function(t){return function(t){O(t)||w("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+s(t)+")")}(t),this.other._map(function(n){return t(n)})},Z.prototype.toString=function(){return"ap("+this.other.toString()+")"},$.prototype=Object.create(G),$.prototype.resolved=function(t){return new W(this.mapper(t))},$.prototype.toString=function(){return"map("+f(this.mapper)+")"},U.prototype=Object.create(G),U.prototype.rejected=function(t){return new z(this.lmapper(t))},U.prototype.resolved=function(t){return new W(this.rmapper(t))},U.prototype.toString=function(){return"bimap("+f(this.lmapper)+", "+f(this.rmapper)+")"},J.prototype=Object.create(G),J.prototype.resolved=function(t){return function(t,n,e){return N(t)?t:S("Future#chain","the function it's given to return a Future",t,"\n  From calling: "+f(n)+"\n  With: "+s(e))}(this.mapper(t),this.mapper,t)},J.prototype.toString=function(){return"chain("+f(this.mapper)+")"},X.prototype=Object.create(G),X.prototype.rejected=function(t){return new z(this.mapper(t))},X.prototype.toString=function(){return"mapRej("+f(this.mapper)+")"},Y.prototype=Object.create(G),Y.prototype.rejected=function(t){return function(t,n,e){return N(t)?t:S("Future#chainRej","the function it's given to return a Future",t,"\n  From calling: "+f(n)+"\n  With: "+s(e))}(this.mapper(t),this.mapper,t)},Y.prototype.toString=function(){return"chainRej("+f(this.mapper)+")"},H.prototype=Object.create(G),H.prototype.rejected=function(t){return new W(t)},H.prototype.resolved=function(t){return new z(t)},H.prototype.toString=function(){return"swap()"},K.prototype=Object.create(G),K.prototype.rejected=function(t){return new W(this.lmapper(t))},K.prototype.resolved=function(t){return new W(this.rmapper(t))},K.prototype.toString=function(){return"fold("+f(this.lmapper)+", "+f(this.rmapper)+")"},tt.prototype=Object.create(G),tt.prototype.rejected=function(t){return this.other._and(new z(t))},tt.prototype.resolved=function(t){return this.other._map(function(){return t})},tt.prototype.cancel=function(){this.other._fork(a,a)()},tt.prototype.toString=function(){return"finally("+this.other.toString()+")"},nt.prototype=Object.create(G),nt.prototype.resolved=function(){return this.other},nt.prototype.toString=function(){return"and("+this.other.toString()+")"},et.prototype=Object.create(G),et.prototype.rejected=function(){return this.other},et.prototype.toString=function(){return"or("+this.other.toString()+")"},rt.prototype=Object.create(G),rt.prototype.run=function(t){return new ut(t,new Q(this.other))},rt.prototype.toString=function(){return"race("+this.other.toString()+")"},it.prototype=Object.create(G),it.prototype.resolved=function(t){return this.other._map(function(n){return[t,n]})},it.prototype.run=function(t){return new ot(t,new Q(this.other))},it.prototype.toString=function(){return"both("+this.other.toString()+")"},ut.prototype=Object.create(rt.prototype),ot.prototype=Object.create(it.prototype),at.prototype=Object.create(M.prototype),at.prototype._transform=function(t){return new at(this._spawn,(n=t,{isEmpty:!1,size:(e=this._actions).size+1,head:n,tail:e}));var n,e},at.prototype._ap=function(t){return this._transform(new Z(t))},at.prototype._map=function(t){return this._transform(new $(t))},at.prototype._bimap=function(t,n){return this._transform(new U(t,n))},at.prototype._chain=function(t){return this._transform(new J(t))},at.prototype._mapRej=function(t){return this._transform(new X(t))},at.prototype._chainRej=function(t){return this._transform(new Y(t))},at.prototype._race=function(t){return D(t)?this:this._transform(new rt(t))},at.prototype._both=function(t){return this._transform(new it(t))},at.prototype._and=function(t){return this._transform(new nt(t))},at.prototype._or=function(t){return this._transform(new et(t))},at.prototype._swap=function(){return this._transform(new H)},at.prototype._fold=function(t,n){return this._transform(new K(t,n))},at.prototype._finally=function(t){return this._transform(new tt(t))},at.prototype._fork=function(t,n){var e,r,u,o,c=new i(this._actions.size),s=new i(this._actions.size),f=a,h=!0;function p(i){if(u=!0,(e=i)._spawn){for(var o=e._actions;!o.isEmpty;)c.unshift(o.head),o=o.tail;e=e._spawn}h&&function(){for(h=!1;;){if(u=!1,r=c.shift())f=e._fork(l,y),u||d();else{if(!(r=s.shift()))break;f=e._fork(l,y)}if(!u)return void(h=!0)}f=e._fork(t,n)}()}function l(t){p(r.rejected(t))}function y(t){p(r.resolved(t))}function _(t,n){if(f(),c.clear(),h&&r!==n)for(r.cancel();(o=s.shift())&&o!==n;)o.cancel();p(t)}function d(){for(;o=c.pop();){if(o=o.run(_),u)return;s.unshift(o)}r=r.run(_)}return p(this),function(){for(f(),r&&r.cancel();o=s.shift();)o.cancel()}},at.prototype.toString=function(){for(var t="",n=this._actions;!n.isEmpty;)t="."+n.head.toString()+t,n=n.tail;return this._spawn.toString()+t};var ft=0,ht=1,pt=2;function lt(t,n){this._step=t,this._init=n}function yt(n,e){return t.Apply.test(e)||j("Future.ap",1,"be an Apply",e),t.ap(n,e)}function _t(n,e){return t.Apply.test(n)||j("Future.ap",0,"be an Apply",n),1===arguments.length?h(yt,n):yt(n,e)}function dt(n,e){return t.Alt.test(e)||j("alt",1,"be an Alt",e),t.alt(n,e)}function vt(n,e){return t.Alt.test(n)||j("alt",0,"be an Alt",n),1===arguments.length?h(dt,n):dt(n,e)}function gt(n,e){return t.Functor.test(e)||j("Future.map",1,"be a Functor",e),t.map(n,e)}function mt(t,n){return O(t)||j("Future.map",0,"be a Function",t),1===arguments.length?h(gt,t):gt(t,n)}function bt(n,e,r){return t.Bifunctor.test(r)||j("Future.bimap",2,"be a Bifunctor",r),t.bimap(n,e,r)}function Ft(t,n,e){return O(n)||j("Future.bimap",1,"be a Function",n),2===arguments.length?p(bt,t,n):bt(t,n,e)}function wt(t,n,e){return O(t)||j("Future.bimap",0,"be a Function",t),1===arguments.length?h(Ft,t):2===arguments.length?Ft(t,n):Ft(t,n,e)}function jt(n,e){return t.Chain.test(e)||j("Future.chain",1,"be a Chain",e),t.chain(n,e)}function kt(t,n){return O(t)||j("Future.chain",0,"be a Function",t),1===arguments.length?h(jt,t):jt(t,n)}function St(t,n){return N(n)||S("Future.mapRej",1,n),n.mapRej(t)}function Ot(t,n){return N(n)||S("Future.chainRej",1,n),n.chainRej(t)}function At(t,n){return N(n)||S("Future.finally",1,n),n.finally(t)}function xt(t,n){return N(t)||S("Future.finally",0,t),1===arguments.length?h(At,t):At(t,n)}function Rt(t,n){return N(n)||S("Future.and",1,n),t.and(n)}function Pt(t,n){return N(n)||S("Future.both",1,n),t.both(n)}function qt(t,n){return N(n)||S("Future.or",1,n),t.or(n)}function Mt(t,n){return N(n)||S("Future.race",1,n),n.race(t)}function Nt(t,n){return N(t)||S("Future.race",0,t),1===arguments.length?h(Mt,t):Mt(t,n)}function Et(t,n,e){return N(e)||S("Future.fold",2,e),e.fold(t,n)}function Tt(t,n,e){return O(n)||j("Future.fold",1,"be a function",n),2===arguments.length?p(Et,t,n):Et(t,n,e)}function zt(t,n){return N(n)||S("Future.done",1,n),n.done(t)}function Ct(t,n,e){return N(e)||S("Future.fork",2,e),e._fork(t,n)}function Wt(t,n,e){return O(n)||j("Future.fork",1,"be a function",n),2===arguments.length?p(Ct,t,n):Ct(t,n,e)}function Lt(t,n){return N(n)||S("Future.value",1,n),n.value(t)}function Bt(t,n){this._mval=t,this._mfunc=n}function It(t){return t.isSettled()?t:D(t)?this:"number"==typeof t._time?t._time<this._time?t:this:E._race.call(this,t)}function Dt(t,n){this._time=t,this._value=n}function Qt(t,n){this._time=t,this._value=n}function Gt(t,n){return t===1/0?I:new Dt(t,n)}function Zt(t,n){return t===1/0?I:new Qt(t,n)}function $t(t){this._fn=t}function Ut(t){return O(t)||j("Future.try",0,"be a function",t),new $t(t)}lt.prototype=Object.create(E),lt.prototype._fork=function(t,n){var e=this._step,r=this._init,i=ft,u=a,o=ct(r);function c(t){o=t,i=i===ft?ht:s()}function s(){for(;!o.done;){i=ft;var r=e(ct,st,o.value);if(u=r._fork(t,c),i!==ht)return void(i=pt)}n(o.value)}return s(),function(){u()}},lt.prototype.toString=function(){return"Future.chainRec("+f(this._step)+", "+s(this._init)+")"},Bt.prototype=Object.create(E),Bt.prototype._fork=function(t,n){var e,r,i,u,o=!1,c=!1,f=!1;function h(n){f||(f=!0,t(n))}return i=this._mval._fork(h,function(t){if(i=a,!o)return c=!0,void(r=t);n(e(t))}),u=this._mfunc._fork(h,function(t){if(u=a,function(t){O(t)||w("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+s(t)+")")}(t),!c)return o=!0,void(e=t);n(t(r))}),function(){i(),u()}},Bt.prototype.toString=function(){return"new ParallelAp("+this._mval.toString()+", "+this._mfunc.toString()+")"},Dt.prototype=Object.create(E),Dt.prototype._race=It,Dt.prototype._swap=function(){return new Qt(this._time,this._value)},Dt.prototype._fork=function(t,n){var e=setTimeout(n,this._time,this._value);return function(){clearTimeout(e)}},Dt.prototype.extractRight=function(){return[this._value]},Dt.prototype.toString=function(){return"Future.after("+s(this._time)+", "+s(this._value)+")"},Qt.prototype=Object.create(E),Qt.prototype._race=It,Qt.prototype._swap=function(){return new Dt(this._time,this._value)},Qt.prototype._fork=function(t){var n=setTimeout(t,this._time,this._value);return function(){clearTimeout(n)}},Qt.prototype.extractLeft=function(){return[this._value]},Qt.prototype.toString=function(){return"Future.rejectAfter("+s(this._time)+", "+s(this._value)+")"},$t.prototype=Object.create(E),$t.prototype._fork=function(t,n){var e;try{e=this._fn()}catch(n){return t(n),a}return n(e),a},$t.prototype.toString=function(){return"Future.try("+f(this._fn)+")"};var Jt=Ht.Cold=0,Vt=Ht.Pending=1,Xt=Ht.Rejected=2,Yt=Ht.Resolved=3;function Ht(t){this._pure=t,this.reset()}function Kt(t,n){this._fn=t,this._a=n}function tn(t,n,e){this._fn=t,this._a=n,this._b=e}function nn(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function en(t,n){this._fn=t,this._a=n}function rn(t,n,e){this._fn=t,this._a=n,this._b=e}function un(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function on(t,n){this._fn=t,this._a=n}function an(t,n,e){this._fn=t,this._a=n,this._b=e}function cn(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function sn(t){return R(n=t)&&O(n.next)?t:j("Future.do",0,'return an iterator, maybe you forgot the "*"',t);var n}function fn(t){var n;return R(n=t)&&"boolean"==typeof n.done||w("Future.do was given an invalid generator: Its iterator did not return a valid iteration from iterator.next()\n  Actual: "+s(t)),t.done||N(t.value)?t:S("Future.do","the iterator to produce only valid Futures",t.value,"\n  Tip: If you're using a generator, make sure you always yield a Future")}function hn(t){this._generator=t}function pn(t){return O(t)||j("Future.do",0,"be a Function",t),new hn(t)}function ln(t,n,e){this._acquire=t,this._dispose=n,this._consume=e}function yn(t,n,e){return O(e)||j("Future.hook",2,"be a Future",e),new ln(t,n,e)}function _n(t,n,e){return O(n)||j("Future.hook",1,"be a function",n),2===arguments.length?p(yn,t,n):yn(t,n,e)}function dn(t){this._fn=t}function vn(t,n){return N(t)?t:S("Future.parallel","its second argument to be an array of valid Futures. The value at position "+n+" in the array is not a Future",t)}function gn(t,n){this._futures=n,this._length=n.length,this._max=Math.min(this._length,t)}Ht.prototype=Object.create(E),Ht.prototype.isRejected=function(){return this._state===Xt},Ht.prototype.isResolved=function(){return this._state===Yt},Ht.prototype.extractLeft=function(){return this.isRejected()?[this._value]:[]},Ht.prototype.extractRight=function(){return this.isResolved()?[this._value]:[]},Ht.prototype._addToQueue=function(t,n){var e=this;if(e._state>Vt)return a;var r=e._queue.push(new function(t,n){this[Xt]=t,this[Yt]=n}(t,n))-1;return e._queued=e._queued+1,function(){e._state>Vt||(e._queue[r]=void 0,e._queued=e._queued-1,0===e._queued&&e.reset())}},Ht.prototype._drainQueue=function(){if(!(this._state<=Vt)&&0!==this._queued){for(var t=this._queue,n=t.length,e=this._state,r=this._value,i=0;i<n;i++)t[i]&&t[i][e](r),t[i]=void 0;this._queue=void 0,this._queued=0}},Ht.prototype.reject=function(t){this._state>Vt||(this._value=t,this._state=Xt,this._drainQueue())},Ht.prototype.resolve=function(t){this._state>Vt||(this._value=t,this._state=Yt,this._drainQueue())},Ht.prototype.run=function(){var t=this;t._state>Jt||(t._state=Vt,t._cancel=t._pure._fork(function(n){t.reject(n)},function(n){t.resolve(n)}))},Ht.prototype.reset=function(){this._state!==Jt&&(this._state>Vt&&this._cancel(),this._cancel=a,this._queue=[],this._queued=0,this._value=void 0,this._state=Jt)},Ht.prototype._fork=function(t,n){var e=a;switch(this._state){case Vt:e=this._addToQueue(t,n);break;case Xt:t(this._value);break;case Yt:n(this._value);break;default:e=this._addToQueue(t,n),this.run()}return e},Ht.prototype.toString=function(){return"Future.cache("+this._pure.toString()+")"},Kt.prototype=Object.create(E),Kt.prototype._fork=function(t,n){var e;try{e=this._fn(this._a)}catch(n){return t(n),a}return n(e),a},Kt.prototype.toString=function(){return"Future.encase("+f(this._fn)+", "+s(this._a)+")"},tn.prototype=Object.create(E),tn.prototype._fork=function(t,n){var e;try{e=this._fn(this._a,this._b)}catch(n){return t(n),a}return n(e),a},tn.prototype.toString=function(){return"Future.encase2("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+")"},nn.prototype=Object.create(E),nn.prototype._fork=function(t,n){var e;try{e=this._fn(this._a,this._b,this._c)}catch(n){return t(n),a}return n(e),a},nn.prototype.toString=function(){return"Future.encase3("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+", "+s(this._c)+")"},en.prototype=Object.create(E),en.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},en.prototype.toString=function(){return"Future.encaseN("+f(this._fn)+", "+s(this._a)+")"},rn.prototype=Object.create(E),rn.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,this._b,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},rn.prototype.toString=function(){return"Future.encaseN2("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+")"},un.prototype=Object.create(E),un.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,this._b,this._c,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},un.prototype.toString=function(){return"Future.encaseN3("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+", "+s(this._c)+")"},on.prototype=Object.create(E),on.prototype._fork=function(t,n){var e,r,i,u=this._fn,o=this._a,a=!0;return(e=u(o),r=u,i=o,A(e)?e:w("Future.encaseP expects the function it's given to return a Promise/Thenable\n  Actual: "+s(e)+"\n  From calling: "+f(r)+"\n  With: "+s(i))).then(y(function(t){a&&(a=!1,n(t))}),y(function(n){a&&(a=!1,t(n))})),function(){a=!1}},on.prototype.toString=function(){return"Future.encaseP("+f(this._fn)+", "+s(this._a)+")"},an.prototype=Object.create(E),an.prototype._fork=function(t,n){var e,r,i,u,o=this._fn,a=this._a,c=this._b,h=!0;return(e=o(a,c),r=o,i=a,u=c,A(e)?e:w("Future.encaseP2 expects the function it's given to return a Promise/Thenable\n  Actual: "+s(e)+"\n  From calling: "+f(r)+"\n  With 1: "+s(i)+"\n  With 2: "+s(u))).then(y(function(t){h&&(h=!1,n(t))}),y(function(n){h&&(h=!1,t(n))})),function(){h=!1}},an.prototype.toString=function(){return"Future.encaseP2("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+")"},cn.prototype=Object.create(E),cn.prototype._fork=function(t,n){var e,r,i,u,o,a=this._fn,c=this._a,h=this._b,p=this._c,l=!0;return(e=a(c,h,p),r=a,i=c,u=h,o=p,A(e)?e:w("Future.encaseP3 expects the function it's given to return a Promise/Thenable\n  Actual: "+s(e)+"\n  From calling: "+f(r)+"\n  With 1: "+s(i)+"\n  With 2: "+s(u)+"\n  With 3: "+s(o))).then(y(function(t){l&&(l=!1,n(t))}),y(function(n){l&&(l=!1,t(n))})),function(){l=!1}},cn.prototype.toString=function(){return"Future.encaseP3("+f(this._fn)+", "+s(this._a)+", "+s(this._b)+", "+s(this._c)+")"},hn.prototype=Object.create(E),hn.prototype._fork=function(t,n){var e,r,i=sn(this._generator()),u=ft,o=a;function c(t){if(r=t,u===pt)return s();u=ht,e=fn(i.next(r))}function s(){for(e=fn(i.next(r));!e.done;)if(u=ft,o=e.value._fork(t,c),u!==ht)return void(u=pt);n(e.value)}return s(),function(){o()}},hn.prototype.toString=function(){return"Future.do("+f(this._generator)+")"},ln.prototype=Object.create(E),ln.prototype._fork=function(t,n){var e,r,i,u=this._acquire,o=this._dispose,c=this._consume,h=a,p=a,l=a;function y(){l(i)}function _(){var n,i,u,a=o(r);return i=o,u=r,N(n=a)||S("Future.hook","the first function it's given to return a Future",n,"\n  From calling: "+f(i)+"\n  With: "+s(u)),e=a._fork(t,y)}function d(){p(),_()()}function v(n){l=t,i=n,_()}function g(t){l=n,i=t,_()}return h=u._fork(t,function(t){var n=c(r=t);(function(t,n,e){N(t)||S("Future.hook","the second function it's given to return a Future",t,"\n  From calling: "+f(n)+"\n  With: "+s(e))})(n,c,r),e=d,p=n._fork(v,g)}),e=e||h,function(){e()}},ln.prototype.toString=function(){return"Future.hook("+this._acquire.toString()+", "+f(this._dispose)+", "+f(this._consume)+")"},dn.prototype=Object.create(E),dn.prototype._fork=function(t,n){var e=!0;return this._fn(function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},dn.prototype.toString=function(){return"Future.node("+f(this._fn)+")"},gn.prototype=Object.create(E),gn.prototype._fork=function(t,n){var e=this._futures,r=this._length,i=this._max,u=new Array(r),o=new Array(r),c=0,s=0,f=!1;function h(){for(var t=0;t<r;t++)u[t]&&u[t]()}function p(i){s++,u[i]=e[i]._fork(function(n){u[i]=a,h(),t(n)},function(t){u[i]=a,o[i]=t,s--,c===r&&0===s?n(o):f&&l()})}function l(){for(f=!1;c<r&&s<i;)p(c++);f=!0}return l(),h},gn.prototype.toString=function(){return"Future.parallel("+this._max+", "+s(this._futures)+")"};var mn=new W([]);function bn(t,n){var e;e=n,Array.isArray(e)||j("Future.parallel",1,"be an array",n);var r=function(t,n){for(var e=t.length,r=new Array(e),i=0;i<e;i++)r[i]=n(t[i],i,t);return r}(n,vn);return 0===r.length?mn:new gn(t,r)}function Fn(t){this._fn=t}Fn.prototype=Object.create(E),Fn.prototype._fork=function(t,n){var e,r,i=!0;return(e=this._fn(),r=this._fn,A(e)?e:w("Future.tryP expects the function it's given to return a Promise/Thenable\n  Actual: "+s(e)+"\n  From calling: "+f(r))).then(y(function(t){i&&(i=!1,n(t))}),y(function(n){i&&(i=!1,t(n))})),function(){i=!1}},Fn.prototype.toString=function(){return"Future.tryP("+s(this._fn)+")"},"function"!=typeof Object.create&&F("Please polyfill Object.create to use Fluture"),"function"!=typeof Object.assign&&F("Please polyfill Object.assign to use Fluture"),"function"!=typeof Array.isArray&&F("Please polyfill Array.isArray to use Fluture"),M.of=M[_.of]=L,M.chainRec=M[_.chainRec]=function(t,n){return new lt(t,n)},M.reject=C,M.ap=_t,M.map=mt,M.bimap=wt,M.chain=kt;var wn=r(M,I,Nt,function(t,n){return new Bt(t,n)});function jn(t){return t instanceof wn||e(t)===wn["@@type"]}wn.of=wn[_.of],wn.zero=wn[_.zero],wn.map=mt,wn.ap=_t,wn.alt=vt;var kn=Object.freeze({Future:M,default:M,Par:wn,isParallel:jn,seq:function(t){return jn(t)||j("Future.seq",0,"to be a Par",t),t.sequential},isFuture:N,reject:C,of:L,never:I,isNever:D,after:function(t,n){return x(t)||j("Future.after",0,"be a positive integer",t),1===arguments.length?h(Gt,t):Gt(t,n)},rejectAfter:function(t,n){return x(t)||j("Future.rejectAfter",0,"be a positive integer",t),1===arguments.length?h(Zt,t):Zt(t,n)},attempt:Ut,try:Ut,cache:function(t){return N(t)||S("Future.cache",0,t),new Ht(t)},encase:function t(n,e){return O(n)||j("Future.encase",0,"be a function",n),1===arguments.length?h(t,n):new Kt(n,e)},encase2:function t(n,e,r){switch(O(n)||j("Future.encase2",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);default:return new tn(n,e,r)}},encase3:function t(n,e,r,i){switch(O(n)||j("Future.encase3",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);case 3:return l(t,n,e,r);default:return new nn(n,e,r,i)}},encaseN:function t(n,e){return O(n)||j("Future.encaseN",0,"be a function",n),1===arguments.length?h(t,n):new en(n,e)},encaseN2:function t(n,e,r){switch(O(n)||j("Future.encaseN2",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);default:return new rn(n,e,r)}},encaseN3:function t(n,e,r,i){switch(O(n)||j("Future.encaseN3",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);case 3:return l(t,n,e,r);default:return new un(n,e,r,i)}},encaseP:function t(n,e){return O(n)||j("Future.encaseP",0,"be a function",n),1===arguments.length?h(t,n):new on(n,e)},encaseP2:function t(n,e,r){switch(O(n)||j("Future.encaseP2",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);default:return new an(n,e,r)}},encaseP3:function t(n,e,r,i){switch(O(n)||j("Future.encaseP3",0,"be a function",n),arguments.length){case 1:return h(t,n);case 2:return p(t,n,e);case 3:return l(t,n,e,r);default:return new cn(n,e,r,i)}},go:pn,do:pn,hook:function(t,n,e){return N(t)||S("Future.hook",0,t),1===arguments.length?h(_n,t):2===arguments.length?_n(t,n):_n(t,n,e)},node:function(t){return O(t)||j("Future.node",0,"be a function",t),new dn(t)},parallel:function(t,n){return x(t)||j("Future.parallel",0,"be a positive integer",t),1===arguments.length?h(bn,t):bn(t,n)},tryP:function(t){return O(t)||j("Future.tryP",0,"be a function",t),new Fn(t)},ap:_t,alt:vt,map:mt,bimap:wt,chain:kt,mapRej:function(t,n){return O(t)||j("Future.mapRej",0,"be a Function",t),1===arguments.length?h(St,t):St(t,n)},chainRej:function(t,n){return O(t)||j("Future.chainRej",0,"be a Function",t),1===arguments.length?h(Ot,t):Ot(t,n)},lastly:xt,finally:xt,and:function(t,n){return N(t)||S("Future.and",0,t),1===arguments.length?h(Rt,t):Rt(t,n)},both:function(t,n){return N(t)||S("Future.both",0,t),1===arguments.length?h(Pt,t):Pt(t,n)},or:function(t,n){return N(t)||S("Future.or",0,t),1===arguments.length?h(qt,t):qt(t,n)},race:Nt,swap:function(t){return N(t)||S("Future.swap",0,t),t.swap()},fold:function(t,n,e){return O(t)||j("Future.fold",0,"be a function",t),1===arguments.length?h(Tt,t):2===arguments.length?Tt(t,n):Tt(t,n,e)},done:function(t,n){return O(t)||j("Future.done",0,"be a Function",t),1===arguments.length?h(zt,t):zt(t,n)},fork:function(t,n,e){return O(t)||j("Future.fork",0,"be a function",t),1===arguments.length?h(Wt,t):2===arguments.length?Wt(t,n):Wt(t,n,e)},promise:function(t){return N(t)||S("Future.promise",0,t),t.promise()},value:function(t,n){return O(t)||j("Future.value",0,"be a Function",t),1===arguments.length?h(Lt,t):Lt(t,n)},extractLeft:function(t){return N(t)||S("Future.extractLeft",0,t),t.extractLeft()},extractRight:function(t){return N(t)||S("Future.extractRight",0,t),t.extractRight()}});return Object.assign(M,kn)}(H,K,tt,nt,rt)}),ut=it.isFuture,ot=it.of,at=it.reject,ct=function(t){return Array.isArray(t)},st=function(t){return Q(ct,U(ot,t),t)},ft=N(function(t,n){if(ut(n))return T(st(t))(n);var e=n;return st(t)(n).fork(function(t){return e=t},function(t){return e=t}),e}),ht=N(function(t,n,e){var r;return ct(n)?(r=e.classList)[t].apply(r,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(n)):e.classList[t](n),ot(e)}),pt=N(function(t,n,e){return ft(ht(t,n))(e)}),lt=pt("add"),yt=function(t){return t&&1===t.nodeType},_t=N(function(t,n){return n.hasAttribute(t)?ot(n.getAttribute(t)):at({error:"Sorry, "+t+" was not found."})}),dt=N(function(t,n){return ft(_t(t))(n)}),vt=N(function(t,n){return ot(t in n)}),gt=N(function(t,n){return ft(vt(t))(n)}),mt=N(function(t,n){return gt(t,n)?ot(n[t]):at({error:"Sorry, "+t+" was not found."})}),bt=N(function(t,n){return ft(mt(t))(n)}),Ft=N(function(t,n){return I(bt(t),bt("dataset"))(n)}),wt=N(function(t,n){return ot(n.hasAttribute(t))}),jt=N(function(t,n){return ft(wt(t))(n)}),kt=N(function(t,n){return ot(n.classList.contains(t))}),St=N(function(t,n){return ft(kt(t))(n)}),Ot=N(function(t,n){return I(gt(t),bt("dataset"))(n)}),At=N(function(t,n){return n.removeAttribute(t),ot(n)}),xt=N(function(t,n){return ft(At(t))(n)}),Rt=pt("remove"),Pt=N(function(t,n){if(Ot(t,n)&&!delete n.dataset[t])return at({error:"Property "+t+" is non-configurable."});return ot(n)}),qt=N(function(t,n){return ft(Pt(t))(n)}),Mt=N(function(t,n){if(gt(t,n)&&!delete n[t])return at({error:"Property "+t+" is non-configurable."});return ot(n)}),Nt=N(function(t,n){return ft(Mt(t))(n)}),Et=N(function(t,n,e){return e.setAttribute(t,n),ot(e)}),Tt=N(function(t,n,e){return ft(Et(t,n))(e)}),zt=/^[a-zA-Z0-9]?[a-zA-Z0-9_:.]*[a-zA-Z0-9]$/,Ct=N(function(t,n,e){return function(t){var n=t.match(zt);return n&&1===n.length}(t)?(e.dataset[t]=n,ot(e)):at({error:"Data property "+t+" is not a valid property name"})}),Wt=N(function(t,n,e){return ft(Ct(t,n))(e)}),Lt=N(function(t,n,e){return e[t]=n,ot(e)}),Bt=N(function(t,n,e){return ft(Lt(t,n))(e)}),It=pt("toggle");return{addClass:lt,classList:pt,dom:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return it(function(e,r){var i=yt(n)?n.querySelector(t):document.querySelector(t);i?r(i):e({error:"Element with selector "+t+" not found."})})},domAll:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return it(function(e,r){var i=yt(n)?n.querySelectorAll(t):document.querySelectorAll(t);i.length>0?r(Array.from(i)):e({error:"Elements with selector "+t+" not found."})})},getAttr:dt,getData:Ft,getProp:bt,hasAttr:jt,hasClass:St,hasData:Ot,hasProp:gt,removeAttr:xt,removeClass:Rt,removeData:qt,removeProp:Nt,setAttr:Tt,setData:Wt,setProp:Bt,toggleClass:It}}();
